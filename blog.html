<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blog — Aravind Thoomu</title>
  <style>
    :root {
      --accent: #3a7d44;
      --bg: #ffffff;
      --text: #111111;
      --muted: #666666;
      --card-shadow: 0 4px 10px rgba(0,0,0,0.05);
      --max-width: 1100px;
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial;
    }
    body {
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      padding: 36px 18px;
    }
    .wrap { max-width: var(--max-width); margin: 0 auto; }
    header {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 22px;
    }
    header h1 { font-size: 20px; margin: 0; color: var(--accent); }
    header p { margin: 0; color: var(--muted); font-size: 14px; }
    .grid { display: flex; flex-direction: column; gap: 16px; }
    .card {
      display: flex; gap: 16px; align-items: flex-start;
      background: #fff; border-radius: 10px; padding: 14px;
      box-shadow: var(--card-shadow); border: 1px solid #f1f1f1;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    .card:hover { transform: translateY(-3px); box-shadow: 0 8px 18px rgba(0,0,0,0.08); }
    .thumb {
      flex: 0 0 220px; height: 120px; overflow: hidden; border-radius: 8px;
      background: #efefef; display: flex; align-items: center; justify-content: center;
    }
    .thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .meta { flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: space-between; }
    .title {
      font-size: 18px; font-weight: 600; color: var(--accent); margin: 0 0 6px 0;
    }
    .excerpt {
      color: #222; font-size: 14px; margin: 0 0 10px 0;
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
    }
    .meta-row {
      display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px;
    }
    .date { color: var(--muted); font-size: 13px; }
    .read-more {
      background: var(--accent); color: #fff; padding: 7px 12px; border-radius: 8px;
      text-decoration: none; font-weight: 600; font-size: 13px; transition: opacity 0.2s ease;
    }
    .read-more:hover { opacity: 0.9; }
    @media (min-width:720px) {
      .thumb { flex-basis: 260px; height: 140px; }
      .card { padding: 16px; }
    }
    .loader, .note { color: var(--muted); font-size: 15px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Medium Articles — Aravind Thoomu</h1>
        <p>Latest posts from <strong>aravindthoomu.medium.com</strong></p>
      </div>
      <div><a href="/" style="color:var(--accent);text-decoration:none;font-weight:600">← Back to site</a></div>
    </header>

    <div id="feedArea"><div class="loader">Loading posts…</div></div>
    <p class="note">This page fetches your Medium RSS feed and shows all available posts. Click "Read Full Blog" to open the full article on Medium.</p>
  </div>

<script>
const feedArea = document.getElementById("feedArea");
const rss2jsonAPI = "https://api.rss2json.com/v1/api.json?rss_url=https://medium.com/feed/@aravindthoomu";

function cleanText(html) {
  const div = document.createElement("div");
  div.innerHTML = html;
  return div.textContent || div.innerText || "";
}

async function fetchAndRender() {
  try {
    const res = await fetch(rss2jsonAPI);
    if (!res.ok) throw new Error("Network issue: " + res.status);
    const data = await res.json();
    if (!data.items || data.items.length === 0) throw new Error("No posts found");

    const grid = document.createElement("div");
    grid.className = "grid";

    data.items.forEach(post => {
      const card = document.createElement("article");
      card.className = "card";

      const thumb = document.createElement("div");
      thumb.className = "thumb";
      const img = document.createElement("img");
      img.src = post.thumbnail || "https://via.placeholder.com/400x200?text=No+Image";
      img.alt = post.title;
      thumb.appendChild(img);

      const meta = document.createElement("div");
      meta.className = "meta";
      const excerpt = cleanText(post.description).trim().split(" ").slice(0, 35).join(" ") + "...";

      meta.innerHTML = `
        <h2 class="title">${post.title}</h2>
        <p class="excerpt">${excerpt}</p>
        <div class="meta-row">
          <div class="date">${new Date(post.pubDate).toDateString()}</div>
          <a class="read-more" href="${post.link}" target="_blank" rel="noopener noreferrer">Read Full Blog</a>
        </div>
      `;

      card.appendChild(thumb);
      card.appendChild(meta);
      grid.appendChild(card);
    });

    feedArea.innerHTML = "";
    feedArea.appendChild(grid);

  } catch (err) {
    console.error(err);
    feedArea.innerHTML = `<div class="note">⚠️ Failed to load Medium feed. Please try again later.<br>Error: ${err.message}</div>`;
  }
}
fetchAndRender();
</script>
</body>
</html>